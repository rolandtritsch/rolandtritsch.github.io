<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="generator" content="Hugo 0.68.3" />
  <link rel="canonical" href="http://www.tritsch.org/post/2010-11-24-aquaemacs-and-jdee-and-method/">

  

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" type="text/css" href="http://www.tritsch.org/css/paper.css">

  
  
  <link rel="stylesheet" type="text/css" href="http://www.tritsch.org/css/custom.css">

  
  
  <title>AquaEmacs and JDEE and Method Completion - Cannot find JDK&#39;s tools jar file (or equivalent). Type M-x describe-function [RET] jde-get-jdk-dir for more | innolocity.org/tedn.life</title>
</head>
  <body>
    <div class="container paper">
      <nav class="border split-nav">
  <div class="nav-brand">
    <h3><a href="/">innolocity.org/tedn.life</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
    <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
      
      </ul>
    </div>
  </div>
</nav>
      <main>
        

<h1 class="post-title">AquaEmacs and JDEE and Method Completion - Cannot find JDK&#39;s tools jar file (or equivalent). Type M-x describe-function [RET] jde-get-jdk-dir for more</h1>


<strong>Publish date: </strong>Nov 24, 2010
<br>



  




Hhhmmm ... nerd alert: If you do not like <a href="http://aquamacs.org/">AquaEmacs</a>, <a href="http://jdee.sourceforge.net/">JDEE</a> and <a href="http://jdee.sourceforge.net/jdedoc/html/jde-ug/jde-ug.html">Method Completion</a> ... don't read this :).<div><br /></div><div>Otherwise ... good news: Not sure, if you have stumbled over this, but if you try to make your method completion work you might get an error message along the lines of ...

</div><div><br /></div><div><div><i>Cannot find JDK's tools jar file (or equivalent). Type M-x describe-function [RET] jde-get-jdk-dir for more info.</i></div></div><div><i><br /></i></div><div>... when you hit C-c C-v . to complete a method name. The problem is that the beanshell cannot find tools.jar (or more specifically classes.jar (on MacOS)).</div><div><br /></div><div>In my case my jde-get-jdk-dir returns ...</div><div><br /></div><div><i>/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home</i></div><br /><div>... but if you look the error message up in ...</div><div><br /></div><div><i>~/Library/Application Support/Aquamacs Emacs/jdee-2.4.0.1/lisp/jde.el</i></div><div><br /></div><div>... you will see that on the darwin platform (MacOS) it tries to find the classes.jar file (which contains the tools stuff on darwin) in Classes/classes.jar, but the correct location is ../Classes/classes.jar, means to make it work you have to change jde-get-tools-jar() in jde.el to ...</div><div><br /></div><div><i>(defun jde-get-tools-jar ()</i></div><div><i>  "Gets the correct tools.jar or equivalent. Signals an</i></div><div><i>error if it cannot find the jar."</i></div><div><i>  (let ((tools</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i> (expand-file-name</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>  (if (eq system-type 'darwin)</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>      "<span class="Apple-style-span"><b>../</b></span>Classes/classes.jar"</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>    "lib/tools.jar")</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>  (jde-get-jdk-dir))))</i></div><div><i>    (if (file-exists-p tools)</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>tools</i></div><div><i>      (error (concat "Cannot find JDK's tools jar file (or equivalent)."</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i>  </i></span><i>     "Type M-x describe-function [RET] jde-get-jdk-dir for more info.")))))</i></div><div><i><br /></i></div><div>... and then byte-compile it (just go to the Emacs-Lisp menu and select "Byte-compile this File"). Last but not least, you need to restart AquaEmacs and you are done.</div><div><br /></div><div>OK. I admit it ... this is nerdy :).</div><div>  </div>

  

      </main>
      
  

  </div>
  </body>
</html>