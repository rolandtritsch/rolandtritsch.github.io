---
layout: post
title: AquaEmacs and JDEE and Method Completion - Cannot find JDK's tools jar file (or equivalent). Type M-x describe-function [RET] jde-get-jdk-dir for more
---

Hhhmmm ... nerd alert: If you do not like <a href="http://aquamacs.org/">AquaEmacs</a>, <a href="http://jdee.sourceforge.net/">JDEE</a> and <a href="http://jdee.sourceforge.net/jdedoc/html/jde-ug/jde-ug.html">Method Completion</a> ... don't read this :).<div><br /></div><div>Otherwise ... good news: Not sure, if you have stumbled over this, but if you try to make your method completion work you might get an error message along the lines of ...

</div><div><br /></div><div><div><i>Cannot find JDK's tools jar file (or equivalent). Type M-x describe-function [RET] jde-get-jdk-dir for more info.</i></div></div><div><i><br /></i></div><div>... when you hit C-c C-v . to complete a method name. The problem is that the beanshell cannot find tools.jar (or more specifically classes.jar (on MacOS)).</div><div><br /></div><div>In my case my jde-get-jdk-dir returns ...</div><div><br /></div><div><i>/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home</i></div><br /><div>... but if you look the error message up in ...</div><div><br /></div><div><i>~/Library/Application Support/Aquamacs Emacs/jdee-2.4.0.1/lisp/jde.el</i></div><div><br /></div><div>... you will see that on the darwin platform (MacOS) it tries to find the classes.jar file (which contains the tools stuff on darwin) in Classes/classes.jar, but the correct location is ../Classes/classes.jar, means to make it work you have to change jde-get-tools-jar() in jde.el to ...</div><div><br /></div><div><i>(defun jde-get-tools-jar ()</i></div><div><i>  "Gets the correct tools.jar or equivalent. Signals an</i></div><div><i>error if it cannot find the jar."</i></div><div><i>  (let ((tools</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i> (expand-file-name</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>  (if (eq system-type 'darwin)</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>      "<span class="Apple-style-span"><b>../</b></span>Classes/classes.jar"</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>    "lib/tools.jar")</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>  (jde-get-jdk-dir))))</i></div><div><i>    (if (file-exists-p tools)</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i> </i></span><i>tools</i></div><div><i>      (error (concat "Cannot find JDK's tools jar file (or equivalent)."</i></div><div><span class="Apple-tab-span" style="white-space:pre"><i>  </i></span><i>     "Type M-x describe-function [RET] jde-get-jdk-dir for more info.")))))</i></div><div><i><br /></i></div><div>... and then byte-compile it (just go to the Emacs-Lisp menu and select "Byte-compile this File"). Last but not least, you need to restart AquaEmacs and you are done.</div><div><br /></div><div>OK. I admit it ... this is nerdy :).</div><div>  </div>
